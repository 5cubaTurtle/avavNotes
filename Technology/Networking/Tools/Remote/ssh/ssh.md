#linux #networking 
OpenSSH remote login client

ssh to *remote_host*:  `ssh user@remote_host`
- To connect to a remote with a default user like this: `ssh remote_host`, the default user to needs to be defined in the [[Technology/Networking/Tools/Remote/ssh/Files/config|config file]]: `$HOME/.ssh/config`. 
```shell
ava@ava-ubun-3561 ~/.ssh $ ls -l
-rw------- 1 ava ava 1675 Mar 28 11:35 br-dev-key
-rw-rw-r-- 1 ava ava  151 Apr 28 17:15 config
-rw------- 1 ava ava 2655 Mar  8 10:12 id_rsa
-rw-r--r-- 1 ava ava  571 Mar  8 10:12 id_rsa.pub
-rw-r--r-- 1 ava ava 7980 Apr 28 19:03 known_hosts

ava@ava-ubun-3561 ~/.ssh $ cat config 
Host rubin pleco2e2 PLC2-0-003 jordan static liat PLC2-0-004 PLC2-0-005 PLC2-0-006 PLC2-0-007 PLC2-0-010
  IdentityFile ~/.ssh/br-dev-key
  User robot
```
- Also your public key (`id_rse.pub` could be generated by [[ssh-keygen]]) should be added to the [[authorized_keys]] file of the *remote* to bypass the password prompt. This could be done with [[ssh-copy-id]]: `ssh-copy-id <username>@<host>`.

`ssh -i ... -p <n>`
- `-i`  specify the key file to use for the connection
- `-p`  specify the port *n* (if the remote server listening on port other than 22)
- `-B <interface>` specify the interface to connect form.
- `-l <someuser>` login as `someuser`
- `-X` or `-Y` Enables X11 forwarding - display images and GUI via ssh.
[use](https://www.youtube.com/watch?v=Lk_v6Q0YsNo&t=1013s) of these flags

#### [[ssh-add|add key id to ssh authentication agent]]
adds private key identities to the OpenSSH authentication agent:  `ssh-add`

#### Run command through ssh
[[less]] the latest file on some dir through ssh:
```shell
ssh -t blade-admin@blade "cd /home/kibutz/logs/$ROBOT; ls -t|head -1|less"
```
- `-t`  Force pseudo-terminal allocation.  This can be used to execute arbitrary screen-based programs on a remote machine, which can be very useful, e.g. when implementing menu services.

check if a file exist no a remote:
```bash
if ssh user@remote "[ -e $dst_path ]"; then
      # Sync the file to the remote machine
      rsync -avz $file user@remote:$dst_path
  else 
      echo "File $dst_path does not exist on remote machine"
  fi
```

#### guides
[ubuntu wiki](https://help.ubuntu.com/community/SSH?_ga=2.137759797.402414948.1653398910-1317837442.1651653273)
[install OpenSSH](https://www.cyberciti.biz/faq/ubuntu-linux-install-openssh-server/)
[setup personal bitbucket ssh keys on linux](https://support.atlassian.com/bitbucket-cloud/docs/set-up-personal-ssh-keys-on-linux/)
